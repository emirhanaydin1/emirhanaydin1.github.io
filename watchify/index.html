<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://api.fontshare.com/v2/css?f[]=author@600&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Watchify</title>
</head>
<body>
    <div class="container">
        <div class="name">Watchify</div>
        <div class="test"><input type="text" placeholder="  Search.."></div>
        <div class="box"><img src="https://www.w3schools.com/html/pic_trulli.jpg"><div class="mname"><a id="name">Gravity Falls</a></div></div>
        <div class="box1"><img src="https://www.w3schools.com/html/pic_trulli.jpg"><div class="mname"><a id="name1">Interstellar</a></div></div>
        <div class="box2"><img src="https://www.w3schools.com/html/pic_trulli.jpg"><div class="mname"><a id="name2">Dunkirk</a></div></div>
    </div>
    <script>
        // API bilgileri
        const apiKey = 'your_token'; // Buraya kendi API anahtarınızı ekleyin
        const apiBaseUrl = 'https://api.collectapi.com/imdb/imdbSearchByName?query=';

        // Film isimlerini içeren ID'leri dizi olarak belirleyelim
        const movieIds = ['name', 'name1', 'name2'];

        // Her bir film ismi için API'ye istek yap
        movieIds.forEach(id => {
            const movieName = document.getElementById(id).textContent;
            const boxClass = id.replace('name', 'box');  // 'name' ID'leri 'box' sınıfları ile eşleştir

            const box = document.querySelector(`.${boxClass}`);

            // API'ye istek yap
            fetch(`${apiBaseUrl}${movieName}`, {
                method: 'GET',
                headers: {
                    'authorization': `apikey 3wRIzxecmxeh2bRQPIE6Gy:5GvvgW5GJcQnO16heAT5iN`,
                    'content-type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.result && data.result.length > 0) {
                    const movie = data.result[0];
                    const posterUrl = movie.Poster;

                    // Poster bulunursa, img etiketinin src özelliğini güncelle
                    if (posterUrl && posterUrl !== 'N/A') {
                        box.querySelector('img').src = posterUrl;
                    }
                }
            })
            .catch(error => {
                console.error('Hata:', error);
            });
        });
    </script>
</body>
</html>